<span>{{ vm.loanAccountDetails.loanProductName }}( #{{ vm.loanAccountDetails.accountNo }} )</span>
<div layout="row">
  <div flex="50">
		<md-table-container>
		  <table md-table md-progress="vm.promise">
		    <tbody md-body>
			    <tr md-row>
			        <td md-cell>Disbursement Date</td>
			        <td md-cell>{{ vm.loanAccountDetails.timeline.actualDisbursementDate | DateFormat }}</td>
			    </tr>
			    <tr md-row>
			        <td md-cell>Currency</td>
			        <td md-cell>{{ vm.loanAccountDetails.currency.name }}</td>
			    </tr>
			   <tr md-row>
			        <td md-cell>Loan Officer</td>
			        <td md-cell>{{ vm.loanAccountDetails.loanOfficerName }}</td>
			    </tr>		   		    			    
		    </tbody>
		  </table>
		</md-table-container>			    
  </div>
  <div flex="50">
		<md-table-container>
		  <table md-table md-progress="vm.promise">
		    <tbody md-body>
			    <tr md-row>
			        <td md-cell>Loan Purpose</td>
			        <td md-cell>{{ vm.loanAccountDetails.loanPurposeName }}</td>
			    </tr>
			    <tr md-row>
			        <td md-cell>Proposed Amount</td>
			        <td md-cell>{{ vm.loanAccountDetails.proposedPrincipal | number }}</td>
			    </tr>
			    <tr md-row>
			        <td md-cell>Approved Amount</td>
			        <td md-cell>{{ vm.loanAccountDetails.approvedPrincipal | number }}</td>
			    </tr>
			    <tr md-row>
			        <td md-cell>Disbursed Amount</td>
			        <td md-cell>{{ vm.loanAccountDetails.principal | number }}</td>
			    </tr>				    
			    <tr md-row>
			        <td md-cell>Arrears By</td>
			        <td md-cell>{{ vm.loanAccountDetails.totalOverdue | number }}</td>
			    </tr>		  		    			    
		    </tbody>
		  </table>
		</md-table-container>	
  </div>
</div>
<md-tabs md-dynamic-height md-border-bottom>
  <md-tab label="Account Details">
    <md-content class="md-padding">          
		<div ng-if="vm.loadingvm.loanAccountDetailsInfo">
		    <md-progress-circular md-mode="indeterminate"></md-progress-circular>Loading Loan Account Info...
		    <!--@todo Internationalize-->
		</div>
		<md-table-container>
		  <table md-table md-progress="vm.promise">
		    <tbody md-body>
			    <tr md-row>
			        <td md-cell>Repayment Strategy</td>
			        <td md-cell>{{ vm.loanAccountDetails.transactionProcessingStrategyName }}</td>
			    </tr>
			    <tr md-row>
			    	<td md-cell>Repayments</td>
			    	<td md-cell>{{ vm.loanAccountDetails.numberOfRepayments}} every {{ vm.loanAccountDetails.repaymentEvery}}&nbsp;{{ vm.loanAccountDetails.repaymentFrequencyType.value}}</span><span ng-show="vm.loanAccountDetails.repaymentFrequencyType.id == 2 && vm.loanAccountDetails.repaymentFrequencyNthDayType.id != 0 && vm.loanAccountDetails.repaymentFrequencyDayOfWeekType.id != 0">&nbsp;on&nbsp;{{ vm.loanAccountDetails.repaymentFrequencyNthDayType.value}}&nbsp;{{ vm.loanAccountDetails.repaymentFrequencyDayOfWeekType.value}}</td>
			    </tr>
			    <tr md-row>			    	
			        <td md-cell>Amortization</td>
			        <td md-cell>{{ vm.loanAccountDetails.amortizationType.value }}</td>
			    </tr>
			    <tr md-row ng-show="!vm.loanAccountDetails.isLoanProductLinkedToFloatingRate">    
			        <td md-cell>Interest</td>
			        <td md-cell>{{ vm.loanAccountDetails.annualInterestRate}} per annum ({{ vm.loanAccountDetails.interestRatePerPeriod}}%&nbsp; {{ vm.loanAccountDetails.interestRateFrequencyType.value}}) - {{ vm.loanAccountDetails.interestType.value}}</td>
			    </tr>
			     <tr md-row>
			        <td md-cell>Grace: On Principal Payment</td>
			        <td md-cell>{{ vm.loanAccountDetails.graceOnPrincipalPayment }}</td>
			    </tr>
			    <tr md-row>  	
			    	<td md-cell>Grace: On Interest Payment</td>
			    	<td md-cell>{{ vm.loanAccountDetails.graceOnInterestPayment }}</td>
			    </tr>
			    <tr md-row>	
			        <td md-cell>Grace on Arrears Ageing </td>
			        <td md-cell>{{ vm.loanAccountDetails.graceOnArrearsAgeing }}</td>                
			    </tr>
			    <tr md-row>	
			        <td md-cell>Fund Source</td>
			        <td md-cell>{{ vm.loanAccountDetails.fundName }}</td>                
			    </tr>
			    <tr md-row>	
			        <td md-cell>Interest Free Period </td>
			        <td md-cell>{{ vm.loanAccountDetails.graceOnInterestCharged }}</td>                
			    </tr>			
   			    <tr md-row>	
			        <td md-cell>Interest Calculation Period</td>
			        <td md-cell>{{ vm.loanAccountDetails.interestCalculationPeriodType.value }}</td>                
			    </tr>
			    <tr md-row>	
			        <td md-cell>Allow Partial Interest Calcualtion with same as repayment </td>
			        <td md-cell>{{ vm.loanAccountDetails.allowPartialPeriodInterestCalcualtion }}</td>                
			    </tr>
			    <tr md-row>	
			        <td md-cell>Interest Type</td>
			        <td md-cell>{{ vm.loanAccountDetails.interestType.value }}</td>                
			    </tr>
			    <tr md-row>	
			        <td md-cell>Submitted on </td>
			        <td md-cell>{{ vm.loanAccountDetails.timeline.submittedOnDate | DateFormat }}</td>                
			    </tr>
			    <tr md-row>	
			        <td md-cell>Approved on </td>
			        <td md-cell>{{ vm.loanAccountDetails.timeline.approvedOnDate | DateFormat }}</td>                
			    </tr>
			    <tr md-row>	
			        <td md-cell>Disbursed on  </td>
			        <td md-cell>{{ vm.loanAccountDetails.timeline.actualDisbursementDate | DateFormat }}</td>                
			    </tr>
			    <tr md-row>	
			        <td md-cell>Matures on </td>
			        <td md-cell>{{ vm.loanAccountDetails.timeline.expectedMaturityDate | DateFormat }}</td>                
			    </tr>
			    <tr md-row data-ng-show="vm.loanAccountDetails.canDefineInstallmentAmount">	
			        <td md-cell>Installment Amount</td>
			        <td md-cell>{{ vm.loanAccountDetails.fixedEmiAmount| number }}</td>              
			    </tr>
                <tr md-row data-ng-show="vm.loanAccountDetails.isTopup">
                    <td md-cell>Is Topup Loan?</td>
                    <td md-cell><span class="padded-td">{{ vm.loanAccountDetails.isTopup}}</span></td>
                </tr>
                <tr md-row data-ng-show="vm.loanAccountDetails.isTopup">
                    <td md-cell>Loan closed with Topup</td>
                    <td md-cell><span class="padded-td"><a href="#/viewloanaccount/{{ vm.loanAccountDetails.closureLoanId | number}}">{{ vm.loanAccountDetails.closureLoanAccountNo}}</a></span></td><!--@todo test that this works -->
                </tr>
                <tr md-row data-ng-show="vm.loanAccountDetails.isTopup">
                    <td md-cell>Topup closure amount</td>
                    <td md-cell><span class="padded-td">{{ vm.loanAccountDetails.topupAmount| number}}</span></td>
                </tr>
                <tr md-row>
                    <td md-cell>Recalculate Interest</td>
                    <td md-cell><span class="padded-td">{{ vm.loanAccountDetails.isInterestRecalculationEnabled }}</span></td><!--@todo add YesorNo filter -->
                </tr>
                <tr md-row>
                    <td md-cell>Days in year</td>
                    <td md-cell><span class="padded-td">{{ vm.loanAccountDetails.daysInYearType.value}}</span></td>
                </tr>
                <tr md-row>
                    <td md-cell>Days in month</td>
                    <td md-cell><span class="padded-td">{{ vm.loanAccountDetails.daysInMonthType.value }}</span></td>
                </tr>
                <tr md-row data-ng-show="vm.loanAccountDetails.isInterestRecalculationEnabled">
                    <td md-cell>Interest recalculation compounding on</td>
                    <td md-cell><span class="padded-td">{{ vm.loanAccountDetails.interestRecalculationData.interestRecalculationCompoundingType.value}}</span></td>
                </tr>
                <tr md-row data-ng-show="vm.loanAccountDetails.isInterestRecalculationEnabled">
                    <td md-cell>Advance payments adjustment type</td>
                    <td md-cell><span class="padded-td">{{ vm.loanAccountDetails.interestRecalculationData.rescheduleStrategyType.value}}</span></td>
                </tr>
                <tr md-row data-ng-show="vm.loanAccountDetails.isInterestRecalculationEnabled">
                    <td md-cell>Frequency for recalculate Outstanding Principal</td>
                    <td md-cell><span class="padded-td">{{ vm.loanAccountDetails.interestRecalculationData.calendarData.humanReadable}}</span></td>
                </tr>
                <tr md-row data-ng-show="vm.loanAccountDetails.isInterestRecalculationEnabled && vm.loanAccountDetails.interestRecalculationData.interestRecalculationCompoundingType.id !=0">
                    <td md-cell>Frequency for compounding</td>
                    <td md-cell><span class="padded-td">{{ vm.loanAccountDetails.interestRecalculationData.compoundingCalendarData.humanReadable}}</span></td>
                </tr>
                <tr md-row data-ng-show="vm.loanAccountDetails.isVariableInstallmentsAllowed">
                    <td md-cell>Variable Installments Allowed</td>
                    <td md-cell><span class="padded-td">{{ vm.loanAccountDetails.isVariableInstallmentsAllowed}}</span></td>
                </tr>
                <tr md-row data-ng-show="vm.loanAccountDetails.isVariableInstallmentsAllowed">
                    <td md-cell>Gap between Installments</td>
                    <td colspan="3">(Min:{{ vm.loanAccountDetails.minimumGap}}&nbsp; Days &nbsp;, Max:{{ vm.loanAccountDetails.maximumGap}}&nbsp Days)
                    </td>

                </tr>			    		    			    			    			      
		    </tbody>
		  </table>
		</md-table-container>
    </md-content>
  </md-tab>

  <md-tab label="Repayment Schedule">
    <md-content class="md-padding">
 	Repayment schedule
    </md-content>
  </md-tab>

  <md-tab label="Notes">
    <md-content class="md-padding">
    	Notes
    </md-content>
  </md-tab>
</md-tabs>